# 🚀 JamJam 백엔드 개발 계획

**마지막 업데이트**: 2024년 8월 4일  
**현재 단계**: 1단계 - 인증 + 프로필 시스템  
**전체 진행률**: 0% (시작 전)

## 📋 개발 순서 (전문 개발자 표준)

### 🎯 1단계: 인증 + 프로필 시스템 (1-2일)
**우선순위**: 최고 (모든 기능의 기반)

#### 1.1 Supabase Auth 설정 (30분)
- [ ] Supabase 대시보드 접속
- [ ] Authentication 설정 확인
- [ ] 이메일/비밀번호 인증 활성화
- [ ] 소셜 로그인 설정 (선택사항)

#### 1.2 데이터베이스 스키마 구축 (1시간)
**1.2.1 profiles 테이블 생성 (20분)**
- [ ] `profiles` 테이블 생성
- [ ] 기본 컬럼 설정 (id, username, nickname, bio, avatar_url, instruments, location, created_at, updated_at)
- [ ] 외래 키 제약 조건 설정 (auth.users 참조)
- [ ] 기본값 및 제약 조건 설정

**1.2.2 Row Level Security (RLS) 설정 (20분)**
- [ ] RLS 활성화
- [ ] 공개 읽기 정책 생성
- [ ] 사용자별 쓰기 정책 생성
- [ ] 정책 테스트

**1.2.3 인덱스 및 트리거 설정 (20분)**
- [ ] 성능 최적화 인덱스 생성
- [ ] 자동 프로필 생성 트리거 함수
- [ ] 사용자 생성 시 자동 프로필 생성 트리거
- [ ] 트리거 테스트

#### 1.3 인증 API 구현 (2시간)
**1.3.1 회원가입 API 테스트 (30분)**
- [ ] Supabase Auth 회원가입 테스트
- [ ] 프로필 자동 생성 확인
- [ ] 에러 핸들링 테스트
- [ ] 입력 데이터 검증 테스트

**1.3.2 로그인 API 테스트 (30분)**
- [ ] Supabase Auth 로그인 테스트
- [ ] JWT 토큰 발급 확인
- [ ] 세션 관리 테스트
- [ ] 로그인 실패 케이스 테스트

**1.3.3 프로필 CRUD API 구현 (1시간)**
- [ ] 프로필 조회 API 구현
- [ ] 프로필 수정 API 구현
- [ ] 프로필 삭제 API 구현 (선택사항)
- [ ] 권한 검증 테스트

**1.3.4 자동 로그인 토큰 관리 (30분)**
- [ ] 토큰 저장 로직 구현
- [ ] 토큰 갱신 로직 구현
- [ ] 자동 로그인 테스트
- [ ] 로그아웃 기능 테스트

#### 1.4 보안 정책 설정 (30분)
- [ ] 사용자별 데이터 접근 제어 확인
- [ ] API 키 보안 설정 확인
- [ ] 입력 데이터 검증 강화
- [ ] 보안 테스트 실행

#### 1.5 통합 테스트 (30분)
**1.5.1 전체 플로우 테스트**
- [ ] 회원가입 → 로그인 → 프로필 편집 완료 테스트
- [ ] 자동 로그인 기능 테스트
- [ ] 로그아웃 → 데이터 초기화 테스트
- [ ] 에러 상황 처리 테스트

**1.5.2 성능 테스트**
- [ ] API 응답 시간 측정
- [ ] 동시 사용자 테스트
- [ ] 메모리 사용량 확인
- [ ] 데이터베이스 연결 풀 테스트

**체크포인트**: 회원가입 → 로그인 → 프로필 편집이 모두 작동하는지 확인

---

### 🎯 2단계: 피드 시스템 (2-3일)
**우선순위**: 높음 (핵심 기능)

#### 2.1 피드 데이터베이스 구축
- [ ] `feeds` 테이블 생성
- [ ] `comments` 테이블 생성
- [ ] `likes` 테이블 생성
- [ ] 관계 설정 및 인덱스

#### 2.2 피드 API 구현
- [ ] 피드 생성 API
- [ ] 피드 조회 API (페이지네이션)
- [ ] 피드 수정/삭제 API
- [ ] 좋아요/댓글 API

#### 2.3 미디어 업로드 시스템
- [ ] Supabase Storage 설정
- [ ] 이미지 업로드 API
- [ ] 비디오 업로드 API
- [ ] 파일 압축 및 최적화

#### 2.4 피드 최적화
- [ ] 무한 스크롤 최적화
- [ ] 이미지 lazy loading
- [ ] 캐싱 전략 구현

**체크포인트**: 피드 생성 → 조회 → 좋아요/댓글이 모두 작동하는지 확인

---

### 🎯 3단계: Jam 세션 시스템 (3-4일)
**우선순위**: 높음 (차별화 기능)

#### 3.1 Jam 세션 데이터베이스
- [ ] `jam_sessions` 테이블 생성
- [ ] `session_participants` 테이블 생성
- [ ] `chat_messages` 테이블 생성
- [ ] 상태 관리 필드 추가

#### 3.2 Jam 세션 API
- [ ] 세션 생성 API
- [ ] 세션 참여/탈퇴 API
- [ ] 세션 상태 관리 API
- [ ] 세션 검색 API

#### 3.3 실시간 채팅
- [ ] Supabase Realtime 설정
- [ ] 채팅 메시지 API
- [ ] 실시간 메시지 동기화
- [ ] 채팅 히스토리 관리

#### 3.4 세션 관리
- [ ] 참여자 관리
- [ ] 세션 권한 설정
- [ ] 세션 종료/재시작
- [ ] 세션 알림

**체크포인트**: Jam 세션 생성 → 참여 → 채팅이 모두 실시간으로 작동하는지 확인

---

### 🎯 4단계: 검색 + 소셜 시스템 (2-3일)
**우선순위**: 중간 (사용자 경험 향상)

#### 4.1 검색 시스템
- [ ] 사용자 검색 API
- [ ] 콘텐츠 검색 API
- [ ] 태그 기반 검색
- [ ] 검색 결과 최적화

#### 4.2 소셜 기능
- [ ] 팔로우/언팔로우 API
- [ ] 팔로워 목록 API
- [ ] 친구 추천 시스템
- [ ] 소셜 그래프 관리

#### 4.3 알림 시스템
- [ ] 알림 테이블 생성
- [ ] 푸시 알림 API
- [ ] 이메일 알림
- [ ] 알림 설정 관리

**체크포인트**: 검색 → 팔로우 → 알림이 모두 작동하는지 확인

---

### 🎯 5단계: 실시간 + 최적화 (3-4일)
**우선순위**: 중간 (성능 및 UX)

#### 5.1 실시간 기능
- [ ] 실시간 피드 업데이트
- [ ] 실시간 알림
- [ ] 실시간 상태 동기화
- [ ] 실시간 사용자 상태

#### 5.2 성능 최적화
- [ ] 데이터베이스 쿼리 최적화
- [ ] API 응답 시간 개선
- [ ] 이미지 압축 및 CDN
- [ ] 캐싱 전략 구현

#### 5.3 오프라인 지원
- [ ] 오프라인 데이터 저장
- [ ] 동기화 전략
- [ ] 오프라인 상태 관리
- [ ] 데이터 충돌 해결

#### 5.4 모니터링 및 로깅
- [ ] API 사용량 모니터링
- [ ] 에러 로깅 시스템
- [ ] 성능 메트릭 수집
- [ ] 알림 시스템

**체크포인트**: 모든 기능이 안정적으로 작동하고 성능이 최적화되었는지 확인

---

## 📊 진행 상황 추적

### 현재 단계: 1단계 - 인증 + 프로필 시스템
- **시작일**: 2024년 8월 4일
- **목표 완료일**: 2024년 8월 6일
- **현재 진행률**: 0%

#### 세부 진행 상황
- **1.1 Supabase Auth 설정**: 0% (시작 전)
- **1.2 데이터베이스 스키마 구축**: 0% (시작 전)
- **1.3 인증 API 구현**: 0% (시작 전)
- **1.4 보안 정책 설정**: 0% (시작 전)
- **1.5 통합 테스트**: 0% (시작 전)

### 전체 일정
- **1단계**: 8월 4일 - 8월 6일 (인증 + 프로필)
- **2단계**: 8월 7일 - 8월 9일 (피드 시스템)
- **3단계**: 8월 10일 - 8월 13일 (Jam 세션)
- **4단계**: 8월 14일 - 8월 16일 (검색 + 소셜)
- **5단계**: 8월 17일 - 8월 20일 (실시간 + 최적화)

**총 예상 기간**: 17일 (약 2.5주)

---

## 🛠️ 기술 스택

### 백엔드
- **Supabase**: 데이터베이스, 인증, 실시간
- **PostgreSQL**: 메인 데이터베이스
- **Supabase Storage**: 파일 저장
- **Supabase Realtime**: 실시간 기능

### 보안
- **Row Level Security (RLS)**: 데이터 접근 제어
- **JWT 토큰**: 인증 관리
- **API 키 관리**: 보안 설정

### 성능
- **인덱싱**: 쿼리 최적화
- **캐싱**: 응답 속도 개선
- **CDN**: 미디어 전송 최적화

---

## 📝 개발 노트

### 매일 체크리스트
- [ ] 오늘의 목표 확인
- [ ] 코드 커밋 및 푸시
- [ ] 테스트 실행
- [ ] 문서 업데이트
- [ ] 다음 단계 준비

### 문제 해결 기록
- **환경 변수 문제**: Flutter Web에서 `.env` 파일 접근 문제 해결
- **Supabase 연결**: 하드코딩된 설정으로 안정적 연결
- **폰트 로딩**: Black Ops One 폰트 정상 로드

### 성공 사례
- **Git 관리**: 체계적인 커밋 및 백업
- **문서화**: 개발 진행사항 상세 기록
- **단계별 접근**: 안전한 개발 방식 채택

---

## 🎯 성공 기준

### 각 단계별 성공 기준
1. **1단계**: 회원가입 → 로그인 → 프로필 편집 완료
2. **2단계**: 피드 생성 → 조회 → 좋아요/댓글 완료
3. **3단계**: Jam 세션 생성 → 참여 → 채팅 완료
4. **4단계**: 검색 → 팔로우 → 알림 완료
5. **5단계**: 실시간 기능 + 성능 최적화 완료

### 최종 성공 기준
- [ ] 모든 API가 안정적으로 작동
- [ ] 실시간 기능이 원활하게 동작
- [ ] 성능이 최적화됨
- [ ] 보안이 강화됨
- [ ] 사용자 경험이 우수함

---

## 📞 다음 단계

**지금 시작할 것**: Supabase 대시보드에서 마이그레이션 실행

1. Supabase 대시보드 접속
2. SQL 에디터에서 마이그레이션 실행
3. 인증 API 테스트

**준비된 마이그레이션 파일들**:
- `20241201000001_create_profiles_table.sql`
- `20241201000002_create_feeds_table.sql`
- `20241201000003_create_jam_sessions_table.sql`
- `20241201000004_create_chat_messages_table.sql`

---

**마지막 업데이트**: 2024년 8월 4일  
**다음 업데이트**: 1단계 완료 후 